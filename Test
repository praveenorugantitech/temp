private void sendEmail(String sender, String recipient, String notificationType, List<String> successFiles, List<String> failureFiles) {
    StringBuilder body = new StringBuilder();

    body.append("<html><body>")
        .append("Uphn Batch ").append(notificationType).append(" File Processed Notification <br><br>");

    // Success Files Table
    body.append("<table style='border:1px solid black; border-collapse: collapse;'>")
        .append("<thead><tr>")
        .append("<th style='border:1px solid black; padding: 2px 5px;'>Success Files</th>")
        .append("</tr></thead>")
        .append("<tbody>");

    for (String file : successFiles) {
        body.append("<tr><td style='border:1px solid black; padding: 2px 5px;'>").append(file).append("</td></tr>");
    }

    body.append("</tbody></table><br>");

    // Failure Files Table
    body.append("<table style='border:1px solid black; border-collapse: collapse;'>")
        .append("<thead><tr>")
        .append("<th style='border:1px solid black; padding: 2px 5px;'>Failure Files</th>")
        .append("</tr></thead>")
        .append("<tbody>");

    for (String file : failureFiles) {
        body.append("<tr><td style='border:1px solid black; padding: 2px 5px;'>").append(file).append("</td></tr>");
    }

    body.append("</tbody></table>")
        .append("</body></html>");

    smtpService.sendEmail(sender, recipient, "Uphn Batch " + notificationType + " File Processing Notification", body.toString());
}
